[{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/about.html#1-1","title":"About The Fee Office","content":"The Fee Office is a demo application based on the es-emergency-call Need help with finding aggregates and bounded contexts in our domain by @enumag.It is a prototype implementation showing the result of a model exploration and knowledge crunching process."},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/about.html#1-1-1","title":"What's insight?","content":"An online book summarizes and documents the process of crunching knowledge and how we used the knowledge to identify bounded contexts and aggregates as well as a good architecture for each bounded context and the system as a large.Note: The book and the prototype are both work in progress."},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/about.html#1-1-2","title":"Architecture","content":"The system is split into 5 contexts and each context is implemented as an autonomous module within a monolithic application. Think of those modules as (mico)services deployed together. That said, we combine autonomy of bounded contexts (implemented as modules) with the ease of deploying and operating a monolithic system. Because we keep modules separated (even on database level) we are able to split the system later and scale up individual modules if needed. We also keep the model of each context decoupled from the other models - a very important property of a system that is constantly improved and reshaped."},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/about.html#1-1-3-1","title":"Infrastructure","content":" Docker &amp; Docker Compose Nginx PostgreSQL "},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/about.html#1-1-3-2","title":"Programming Language","content":" PHP 7.x "},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/about.html#1-1-3-3","title":"API Gateway &amp; Module System","content":" zend\/expressive "},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/about.html#1-1-3-4","title":"Dependency Mgmt","content":" composer "},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/about.html#1-1-3-5","title":"Event Sourcing","content":" Event Machine "},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/about.html#1-1-3-6","title":"State Persistence","content":" PostgreSQL Document Store Continue with setting up the demo application using Docker. You'll find instructions on the next page."},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/installation.html#1-2","title":"Installation","content":"Docker is the only supported way to run the demo application. The commands shown here work on a Linux system with Git, Docker and Docker Compose installed.git clone https:\/\/github.com\/proophsoftware\/fee-office.git cd fee-office docker run --rm -it -v $(pwd):\/app prooph\/composer:7.2 install sudo chown $(id -u -n):$(id -g -n) . -R docker-compose up -d "},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/installation.html#1-2-1","title":"Troubleshooting","content":"With the command docker-compose ps you can list the running containers. Make sure that all required ports are available on your machine. If not you can modify port mapping in the docker-compose.yml."},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/installation.html#1-2-1-1","title":"Have you tried turning it off and on again?","content":"If something does not work as expected try to restart the containers first:$ docker-compose down $ docker-compose up -d "},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/installation.html#1-2-1-2","title":"Projection reset","content":"TODOTo better understand the system read about \"autonomous modules\" on the next page."},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/module_system.html#1-3","title":"Autonomous Modules","content":"The Fee Office is split into 5 bounded contexts. Each context is represented as a software module in our system. But we don't use a monolithic MVC module approach like you know from ZendFramework 2 modules or Symfony bundles. Instead we use the lightweight module system provided by Zend Expressive.The technique used in the demo is not bound to zend expressive. We've picked it because expressive uses PSR standards and has a module system that works the way we need it. Anyway, you can achieve the same project structure using any existing PHP framework and composer. We recommend asking the respective framework community if you're not sure how to do it with your framework of choice."},{"id":"https:\/\/proophsoftware.github.io\/fee-office\/intro\/module_system.html#1-3-1","title":"The Rules","content":"Each module should be completely independent of any other module even if all modules are deployed on the same server.To achieve module autonomy we use a special set up. It is a combination of Expressive modules which are also composer packages. More on that in a minute. Furthermore, an application layer acts as the glue layer to coordinate communication between users\/clients and modules as well as between the modules \"talking\" to each other. Each module has its own URL root path, f.e. the RealtyRegistration module uses the path \/realty\/.... Each module has its own composer.json and only uses dependencies defined in that composer.json OR provided by the application layer. Each module has at least a dedicated database schema assigned to it, if not its own database(s). No module is allowed to use a class or function defined in another module. The following diagram illustrates the architecture:If we later want to deploy one or more modules separated from the others (turn a module into a microservice), we can \"easily\" do that by deploying the module together with the application layer and globally defined dependencies provided by the application layer."}]